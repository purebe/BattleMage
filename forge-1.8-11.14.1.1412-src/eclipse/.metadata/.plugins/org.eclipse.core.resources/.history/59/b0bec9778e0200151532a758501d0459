package purebe.battlemage.magic;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.Vec3;
import purebe.battlemage.entities.ArtilleryCattleEntity;

public class ArtilleryCattle implements ISpell {
	EntityPlayer           player;
	ArtilleryCattleEntity  babyCow;
	Vec3                   playerLookat;
	int                    intensity;
	
	
	public ArtilleryCattle(EntityPlayer player, Vec3 playerLookat) {
		this.player = player;
		this.playerLookat = playerLookat;
		this.intensity = 1;
	}
	
	@Override
	public void cast() {
		System.out.println("You cast Artillery Cattle!");
		
		Vec3 cowPosition, cowVelocity, cowDirection;
		
		Vec3 upVector = new Vec3(0, 1, 0);
		Vec3 lookAtY = playerLookat.subtract(playerLookat.xCoord, 0, playerLookat.zCoord);
		double lookAtAngleY = upVector.dotProduct(lookAtY);
		
		/* double explosionX = entityPlayer.posX + entityPlayer.getLookVec().xCoord * 20;
		double explosionY = entityPlayer.posY + lookAtAngleY * 20;
		double explosionZ = entityPlayer.posZ + entityPlayer.getLookVec().zCoord * 20;*/
		
		cowPosition = new Vec3(player.posX + playerLookAt.xCoord * 5);
		
		
		babyCow = new ArtilleryCattleEntity(player.worldObj);
		babyCow.setGrowingAge(-10000);
		babyCow.setLocationAndAngles(player.posX, player.posY, player.posZ, player.rotationYaw, 0.0f);
		babyCow.setVelocity(x, y, z);
		player.worldObj.spawnEntityInWorld(babyCow);
	}
}
